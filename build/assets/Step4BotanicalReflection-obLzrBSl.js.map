{"version":3,"file":"Step4BotanicalReflection-obLzrBSl.js","sources":["../../src/components/garden/steps/Step4BotanicalReflection.tsx"],"sourcesContent":["// Step 4: Botanical Reflection - Three-Phase Mining Process\n// Placeholder implementation showing the flower transformation and mining interface\n\nimport React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useGardenState } from '../../../context/GardenStateContext';\nimport type { MiningPhase, MiningResult } from '../../../context/GardenStateTypes';\n\nconst Step4BotanicalReflection: React.FC = () => {\n  const { \n    gardenState, \n    startMiningPhase, \n    completeMiningPhase, \n    updateFlowerState \n  } = useGardenState();\n  \n  const [userInput, setUserInput] = useState('');\n  const [currentPhase, setCurrentPhase] = useState<MiningPhase>(gardenState.currentMiningPhase);\n\n  const phases = [\n    {\n      id: 1 as MiningPhase,\n      title: \"Neutral Observation\",\n      icon: \"/assets/icon_magnifying_glass.png\",\n      description: \"Let's examine this thought with curiosity, not judgment\",\n      prompt: \"What do you notice about this thought when you observe it without trying to change it?\",\n      type: 'neutralize' as const,\n    },\n    {\n      id: 2 as MiningPhase,\n      title: \"Root Purpose\",\n      icon: \"/assets/icon_watering_can.png\",\n      description: \"What protective purpose might this thought serve?\",\n      prompt: \"Even difficult thoughts often try to protect us in some way. What might this thought be trying to protect you from?\",\n      type: 'commonGround' as const,\n    },\n    {\n      id: 3 as MiningPhase,\n      title: \"New Growth Perspective\",\n      icon: \"/assets/icon_pruning_shears.png\", \n      description: \"How might we nurture a more compassionate view?\",\n      prompt: \"If you could speak to yourself with the same kindness you'd show a good friend, what would you say about this situation?\",\n      type: 'dataExtraction' as const,\n    }\n  ];\n\n  const currentPhaseData = phases[currentPhase - 1];\n\n  const handlePhaseComplete = () => {\n    const result: MiningResult = {\n      phase: currentPhase,\n      type: currentPhaseData.type,\n      userInput,\n      selectedPrompts: [currentPhaseData.prompt],\n      timestamp: new Date().toISOString(),\n      completed: true,\n    };\n\n    completeMiningPhase(result);\n    \n    // Update flower state based on phase\n    if (currentPhase === 1) {\n      updateFlowerState('neutral');\n      setCurrentPhase(2);\n      startMiningPhase(2);\n    } else if (currentPhase === 2) {\n      updateFlowerState('fullbloom');\n      setCurrentPhase(3);\n      startMiningPhase(3);\n    } else {\n      // All phases complete - will navigate to garden path\n    }\n    \n    setUserInput('');\n  };\n\n  const getFlowerImage = () => {\n    const topic = gardenState.selectedTopic || 'money';\n    const state = gardenState.flowerState;\n    return `/assets/flower_${topic}_${state}.png`;\n  };\n\n  const fieldBackground = gardenState.selectedTopic \n    ? `/assets/field_${gardenState.selectedTopic}_bg.png`\n    : '/assets/field_money_bg.png';\n\n  return (\n    <div \n      className=\"garden-step garden-step-botanical\"\n      style={{\n        position: 'relative',\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n      }}\n    >\n      {/* Blurred Field Background */}\n      <div\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          backgroundImage: `url(${fieldBackground})`,\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          filter: 'blur(5px) brightness(0.85)',\n          zIndex: 'var(--z-garden-background)',\n        }}\n      />\n\n      {/* Main Content */}\n      <div\n        style={{\n          position: 'relative',\n          zIndex: 'var(--z-garden-interactive)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          height: '100%',\n          padding: '40px',\n        }}\n      >\n        <div\n          style={{\n            display: 'flex',\n            gap: '60px',\n            alignItems: 'center',\n            maxWidth: '1200px',\n            width: '100%',\n            flexWrap: 'wrap',\n            justifyContent: 'center',\n          }}\n        >\n          {/* Flower Focus Area */}\n          <motion.div\n            initial={{ scale: 0.8, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ duration: 0.8 }}\n            style={{\n              position: 'relative',\n              textAlign: 'center',\n            }}\n          >\n            {/* Flower Image */}\n            <motion.img\n              key={gardenState.flowerState}\n              src={getFlowerImage()}\n              alt={`${gardenState.selectedTopic} flower in ${gardenState.flowerState} state`}\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              transition={{ duration: 0.5 }}\n              style={{\n                width: '200px',\n                height: '200px',\n                objectFit: 'contain',\n                filter: 'drop-shadow(0 10px 30px rgba(0,0,0,0.3))',\n              }}\n            />\n\n            {/* Root Animation for Phase 2 */}\n            {currentPhase === 2 && (\n              <motion.div\n                initial={{ scaleY: 0, opacity: 0 }}\n                animate={{ scaleY: 1, opacity: 1 }}\n                transition={{ duration: 1, delay: 0.5 }}\n                style={{\n                  position: 'absolute',\n                  bottom: '-20px',\n                  left: '50%',\n                  transform: 'translateX(-50%)',\n                  width: '100px',\n                  height: '60px',\n                  backgroundImage: 'url(/assets/flower_roots_static.png)',\n                  backgroundSize: 'contain',\n                  backgroundRepeat: 'no-repeat',\n                  backgroundPosition: 'center top',\n                  transformOrigin: 'top center',\n                }}\n              />\n            )}\n          </motion.div>\n\n          {/* Mining Interface */}\n          <motion.div\n            initial={{ x: 50, opacity: 0 }}\n            animate={{ x: 0, opacity: 1 }}\n            transition={{ duration: 0.8, delay: 0.3 }}\n            style={{\n              background: 'rgba(255, 255, 255, 0.95)',\n              backdropFilter: 'blur(20px)',\n              padding: '40px',\n              borderRadius: '20px',\n              boxShadow: '0 20px 60px rgba(0,0,0,0.3)',\n              maxWidth: '500px',\n              width: '100%',\n            }}\n          >\n            {/* Phase Header */}\n            <div style={{ textAlign: 'center', marginBottom: '30px' }}>\n              <img\n                src={currentPhaseData.icon}\n                alt={currentPhaseData.title}\n                style={{\n                  width: '60px',\n                  height: '60px',\n                  marginBottom: '16px',\n                  filter: 'drop-shadow(0 4px 12px rgba(0,0,0,0.2))',\n                }}\n              />\n              <h2 style={{\n                margin: 0,\n                marginBottom: '8px',\n                fontSize: '1.8rem',\n                color: 'var(--garden-night-primary)',\n                fontWeight: 400,\n              }}>\n                {currentPhaseData.title}\n              </h2>\n              <p style={{\n                margin: 0,\n                fontSize: '1rem',\n                color: 'var(--garden-night-secondary)',\n                opacity: 0.8,\n              }}>\n                {currentPhaseData.description}\n              </p>\n            </div>\n\n            {/* Progress Indicator */}\n            <div style={{\n              display: 'flex',\n              justifyContent: 'center',\n              gap: '12px',\n              marginBottom: '30px',\n            }}>\n              {phases.map((phase, index) => (\n                <div\n                  key={phase.id}\n                  style={{\n                    width: '12px',\n                    height: '12px',\n                    borderRadius: '50%',\n                    background: index + 1 <= currentPhase \n                      ? 'var(--garden-glow-bright)' \n                      : 'rgba(0,0,0,0.2)',\n                    transition: 'all 0.3s ease',\n                  }}\n                />\n              ))}\n            </div>\n\n            {/* Mining Prompt */}\n            <div style={{ marginBottom: '24px' }}>\n              <p style={{\n                margin: 0,\n                marginBottom: '16px',\n                fontSize: '1.1rem',\n                color: 'var(--garden-night-primary)',\n                fontWeight: 500,\n                lineHeight: 1.4,\n              }}>\n                {currentPhaseData.prompt}\n              </p>\n            </div>\n\n            {/* User Input */}\n            <textarea\n              value={userInput}\n              onChange={(e) => setUserInput(e.target.value)}\n              placeholder=\"Share your thoughts here...\"\n              style={{\n                width: '100%',\n                height: '120px',\n                padding: '16px',\n                border: '2px solid rgba(0,0,0,0.1)',\n                borderRadius: '12px',\n                fontSize: '1rem',\n                fontFamily: 'inherit',\n                resize: 'vertical',\n                marginBottom: '24px',\n                background: 'rgba(255,255,255,0.9)',\n              }}\n              onFocus={(e) => {\n                e.target.style.borderColor = 'var(--garden-glow-bright)';\n                e.target.style.boxShadow = '0 0 0 3px rgba(180,200,255,0.2)';\n              }}\n              onBlur={(e) => {\n                e.target.style.borderColor = 'rgba(0,0,0,0.1)';\n                e.target.style.boxShadow = 'none';\n              }}\n            />\n\n            {/* Action Button */}\n            <div style={{ textAlign: 'center' }}>\n              <button\n                onClick={handlePhaseComplete}\n                disabled={!userInput.trim()}\n                className=\"garden-button\"\n                style={{\n                  background: userInput.trim() \n                    ? 'var(--garden-night-primary)' \n                    : 'rgba(0,0,0,0.3)',\n                  color: 'white',\n                  border: 'none',\n                  padding: '12px 32px',\n                  borderRadius: '12px',\n                  fontSize: '1rem',\n                  fontWeight: 500,\n                  cursor: userInput.trim() ? 'pointer' : 'not-allowed',\n                  transition: 'all 0.3s ease',\n                }}\n              >\n                {currentPhase === 3 ? 'Complete Reflection' : 'Continue to Next Phase'}\n              </button>\n            </div>\n          </motion.div>\n        </div>\n      </div>\n\n      {/* Original Thought Display */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.5, duration: 0.8 }}\n        style={{\n          position: 'absolute',\n          top: '30px',\n          left: '50%',\n          transform: 'translateX(-50%)',\n          background: 'rgba(0, 0, 0, 0.8)',\n          color: 'var(--garden-moonlight)',\n          padding: '16px 24px',\n          borderRadius: '12px',\n          maxWidth: '80%',\n          textAlign: 'center',\n          zIndex: 'var(--z-garden-ui-base)',\n        }}\n      >\n        <p style={{ margin: 0, fontSize: '0.9rem', opacity: 0.7 }}>\n          Reflecting on:\n        </p>\n        <p style={{ margin: 0, marginTop: '4px', fontSize: '1rem', fontStyle: 'italic' }}>\n          \"{gardenState.userThought}\"\n        </p>\n      </motion.div>\n    </div>\n  );\n};\n\nexport default Step4BotanicalReflection;"],"names":["Step4BotanicalReflection","gardenState","startMiningPhase","completeMiningPhase","updateFlowerState","useGardenState","userInput","setUserInput","useState","currentPhase","setCurrentPhase","phases","currentPhaseData","handlePhaseComplete","result","getFlowerImage","topic","state","fieldBackground","jsxs","jsx","motion","phase","index"],"mappings":"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"}