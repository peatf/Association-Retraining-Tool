{"version":3,"file":"SubTopicReveal-Bub1U45F.js","sources":["../../src/components/ThoughtPicker/SubTopicReveal.tsx"],"sourcesContent":["/**\n * SubTopicReveal.jsx\n * React component for revealing subcategories for a selected category\n * Uses ContentSearchService.getSubcategories(selectedCategory)\n */\n\nimport React, { useState, useEffect } from 'react';\nimport contentSearchService from '../../services/ContentSearchService';\nimport { Spinner, ErrorState } from '../common';\n\ninterface SubTopicRevealProps {\n  selectedCategory: string;\n  onSubTopicSelect: (subcategory: string | null) => void;\n  selectedSubTopic: string | null;\n}\n\nconst SubTopicReveal: React.FC<SubTopicRevealProps> = ({ selectedCategory, onSubTopicSelect, selectedSubTopic }) => {\n  const [subcategories, setSubcategories] = useState<string[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const loadSubcategories = async (): Promise<void> => {\n      if (!selectedCategory) {\n        setSubcategories([]);\n        return;\n      }\n\n      try {\n        setLoading(true);\n        setError(null);\n        \n        const subs = await contentSearchService.getSubcategories(selectedCategory);\n        setSubcategories(subs);\n        \n        if (subs.length === 0) {\n          console.warn(`No subcategories found for ${selectedCategory}`);\n        }\n      } catch (err) {\n        console.error('Error loading subcategories:', err);\n        setError(err instanceof Error ? err.message : 'Unknown error');\n        setSubcategories([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadSubcategories();\n  }, [selectedCategory]);\n\n  const handleSubTopicClick = (subcategory: string | null): void => {\n    if (onSubTopicSelect) {\n      onSubTopicSelect(subcategory);\n    }\n  };\n\n  // Don't render if no category is selected\n  if (!selectedCategory) {\n    return null;\n  }\n\n  if (loading) {\n    return (\n      <Spinner \n        message={`Loading subcategories for ${selectedCategory}...`}\n        aria-label={`Loading subcategories for ${selectedCategory}`}\n      />\n    );\n  }\n\n  const retryLoading = (): void => {\n    setError(null);\n    setLoading(true);\n    // Re-trigger the useEffect by changing selectedCategory state\n  };\n\n  if (error) {\n    return (\n      <ErrorState\n        title={`Error loading subcategories for ${selectedCategory}`}\n        message={error}\n        onRetry={retryLoading}\n        retryText=\"Try Again\"\n      />\n    );\n  }\n\n  if (subcategories.length === 0) {\n    return (\n      <div className=\"subtopic-reveal empty\">\n        <h3>{selectedCategory}</h3>\n        <p>No specific subcategories available. You can continue with the general category.</p>\n        <button \n          className=\"btn-primary\"\n          onClick={() => handleSubTopicClick(null)}\n        >\n          Continue with {selectedCategory}\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"subtopic-reveal\">\n      <h3>Choose a specific area within {selectedCategory}:</h3>\n      <div className=\"subtopic-buttons\">\n        {subcategories.map((subcategory, index) => (\n          <button\n            key={subcategory}\n            className={`btn-primary subtopic-button subtopic-${subcategory.toLowerCase().replace(/[^a-z0-9]/g, '')} ${\n              selectedSubTopic === subcategory ? 'selected' : ''\n            }`}\n            onClick={() => handleSubTopicClick(subcategory)}\n            style={{ animationDelay: `${index * 0.1}s` }}\n            data-testid={`subtopic-button-${subcategory.toLowerCase().replace(/[^a-z0-9]/g, '')}`}\n            aria-pressed={selectedSubTopic === subcategory}\n          >\n            <span className=\"subtopic-name\">{subcategory}</span>\n          </button>\n        ))}\n        \n        {/* Option to skip subcategory selection */}\n        <button\n          className=\"btn-secondary general-category-button\"\n          onClick={() => handleSubTopicClick(null)}\n          style={{ animationDelay: `${subcategories.length * 0.1}s` }}\n        >\n          General {selectedCategory}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default SubTopicReveal;"],"names":["SubTopicReveal","selectedCategory","onSubTopicSelect","selectedSubTopic","subcategories","setSubcategories","useState","loading","setLoading","error","setError","useEffect","subs","contentSearchService","err","handleSubTopicClick","subcategory","jsx","Spinner","retryLoading","ErrorState","jsxs","index"],"mappings":"mHAgBA,MAAMA,EAAgD,CAAC,CAAE,iBAAAC,EAAkB,iBAAAC,EAAkB,iBAAAC,KAAuB,CAClH,KAAM,CAACC,EAAeC,CAAgB,EAAIC,EAAAA,SAAmB,CAAA,CAAE,EACzD,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAK,EACtC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAwB,IAAI,EAEtDK,EAAAA,UAAU,IAAM,EACY,SAA2B,CACnD,GAAI,CAACV,EAAkB,CACrBI,EAAiB,CAAA,CAAE,EACnB,MACF,CAEA,GAAI,CACFG,EAAW,EAAI,EACfE,EAAS,IAAI,EAEb,MAAME,EAAO,MAAMC,EAAqB,iBAAiBZ,CAAgB,EACzEI,EAAiBO,CAAI,EAEjBA,EAAK,SAAW,GAClB,QAAQ,KAAK,8BAA8BX,CAAgB,EAAE,CAEjE,OAASa,EAAK,CACZ,QAAQ,MAAM,+BAAgCA,CAAG,EACjDJ,EAASI,aAAe,MAAQA,EAAI,QAAU,eAAe,EAC7DT,EAAiB,CAAA,CAAE,CACrB,QAAA,CACEG,EAAW,EAAK,CAClB,CACF,GAEA,CACF,EAAG,CAACP,CAAgB,CAAC,EAErB,MAAMc,EAAuBC,GAAqC,CAC5Dd,GACFA,EAAiBc,CAAW,CAEhC,EAGA,GAAI,CAACf,EACH,OAAO,KAGT,GAAIM,EACF,OACEU,EAAAA,IAACC,EAAA,CACC,QAAS,6BAA6BjB,CAAgB,MACtD,aAAY,6BAA6BA,CAAgB,EAAA,CAAA,EAK/D,MAAMkB,EAAe,IAAY,CAC/BT,EAAS,IAAI,EACbF,EAAW,EAAI,CAEjB,EAEA,OAAIC,EAEAQ,EAAAA,IAACG,EAAA,CACC,MAAO,mCAAmCnB,CAAgB,GAC1D,QAASQ,EACT,QAASU,EACT,UAAU,WAAA,CAAA,EAKZf,EAAc,SAAW,EAEzBiB,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAJ,EAAAA,IAAC,MAAI,SAAAhB,CAAA,CAAiB,EACtBgB,EAAAA,IAAC,KAAE,SAAA,kFAAA,CAAgF,EACnFI,EAAAA,KAAC,SAAA,CACC,UAAU,cACV,QAAS,IAAMN,EAAoB,IAAI,EACxC,SAAA,CAAA,iBACgBd,CAAA,CAAA,CAAA,CACjB,EACF,EAKFoB,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAA,OAAC,KAAA,CAAG,SAAA,CAAA,iCAA+BpB,EAAiB,GAAA,EAAC,EACrDoB,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACZ,SAAA,CAAAjB,EAAc,IAAI,CAACY,EAAaM,IAC/BL,EAAAA,IAAC,SAAA,CAEC,UAAW,wCAAwCD,EAAY,YAAA,EAAc,QAAQ,aAAc,EAAE,CAAC,IACpGb,IAAqBa,EAAc,WAAa,EAClD,GACA,QAAS,IAAMD,EAAoBC,CAAW,EAC9C,MAAO,CAAE,eAAgB,GAAGM,EAAQ,EAAG,GAAA,EACvC,cAAa,mBAAmBN,EAAY,YAAA,EAAc,QAAQ,aAAc,EAAE,CAAC,GACnF,eAAcb,IAAqBa,EAEnC,SAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAiB,SAAAD,CAAA,CAAY,CAAA,EATxCA,CAAA,CAWR,EAGDK,EAAAA,KAAC,SAAA,CACC,UAAU,wCACV,QAAS,IAAMN,EAAoB,IAAI,EACvC,MAAO,CAAE,eAAgB,GAAGX,EAAc,OAAS,EAAG,GAAA,EACvD,SAAA,CAAA,WACUH,CAAA,CAAA,CAAA,CACX,CAAA,CACF,CAAA,EACF,CAEJ"}