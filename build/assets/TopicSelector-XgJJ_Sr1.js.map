{"version":3,"file":"TopicSelector-XgJJ_Sr1.js","sources":["../../src/components/ThoughtPicker/TopicSelector.tsx"],"sourcesContent":["/**\n * TopicSelector.jsx\n * React component for selecting categories dynamically from ContentSearchService\n * Replaces static topic selection with dynamic category loading\n */\n\nimport React, { useState, useEffect, useMemo } from 'react';\nimport contentSearchService from '../../services/ContentSearchService';\nimport { Spinner, ErrorState } from '../common';\n\ninterface TopicSelectorProps {\n  onTopicSelect: (category: string) => void;\n  selectedTopic: string | null;\n}\n\ninterface Category {\n  id: string;\n  name: string;\n}\n\nconst TopicSelector: React.FC<TopicSelectorProps> = ({ onTopicSelect, selectedTopic }) => {\n  const [categories, setCategories] = useState<string[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Default icons for categories (fallback)\n  const getDefaultIcon = (category: string): string => {\n    const iconMap: Record<string, string> = {\n      'Money': 'üí∞',\n      'Relationships': 'üíï',\n      'Self-Image': 'ü™û',\n      'Romance': 'üíï'\n    };\n    return iconMap[category] || 'üîπ';\n  };\n\n  // Default descriptions for categories (fallback)\n  const getDefaultDescription = (category: string): string => {\n    const descriptionMap: Record<string, string> = {\n      'Money': 'Financial concerns, scarcity, and abundance mindset',\n      'Relationships': 'Connection, trust, boundaries, intimacy',\n      'Self-Image': 'Self-worth, confidence, and personal identity',\n      'Romance': 'Dating, relationships, and emotional connections'\n    };\n    return descriptionMap[category] || `Work on ${category.toLowerCase()} related concerns`;\n  };\n\n  const loadCategories = useMemo(() => async (): Promise<void> => {\n    try {\n      setLoading(true);\n      const cats = await contentSearchService.getCategories();\n      \n      if (cats.length === 0) {\n        throw new Error('No categories found');\n      }\n      \n      setCategories(cats);\n      setError(null);\n    } catch (err) {\n      console.error('Error loading categories:', err);\n      setError(err instanceof Error ? err.message : 'Unknown error');\n      // Fallback to default categories\n      setCategories(['Money', 'Relationships', 'Self-Image']);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadCategories();\n  }, [loadCategories]);\n\n  const handleTopicClick = (category: string): void => {\n    if (onTopicSelect) {\n      onTopicSelect(category);\n    }\n  };\n\n  const retryLoading = (): void => {\n    setError(null);\n    setLoading(true);\n    loadCategories();\n  };\n\n  if (loading) {\n    return (\n      <Spinner \n        message=\"Loading categories...\" \n        aria-label=\"Loading available topic categories\"\n      />\n    );\n  }\n\n  if (error && categories.length === 0) {\n    return (\n      <ErrorState\n        title=\"Failed to Load Categories\"\n        message={error}\n        onRetry={retryLoading}\n        retryText=\"Try Again\"\n      />\n    );\n  }\n\n  return (\n    <div className=\"topic-selector\">\n      <div id=\"topic-buttons\" className=\"topic-buttons\">\n        {categories.map((category, index) => (\n          <button\n            key={category}\n            className={`btn-primary topic-button topic-${category.toLowerCase().replace(/[^a-z0-9]/g, '')} ${\n              selectedTopic === category ? 'selected' : ''\n            }`}\n            onClick={() => handleTopicClick(category)}\n            style={{ animationDelay: `${index * 0.1}s` }}\n            data-testid={`topic-button-${category.toLowerCase().replace(/[^a-z0-9]/g, '')}`}\n            aria-pressed={selectedTopic === category}\n            aria-describedby={`topic-desc-${category.toLowerCase().replace(/[^a-z0-9]/g, '')}`}\n          >\n            <span className=\"topic-icon\" aria-hidden=\"true\">{getDefaultIcon(category)}</span>\n            <span className=\"topic-name\">{category}</span>\n            <span \n              className=\"topic-description\"\n              id={`topic-desc-${category.toLowerCase().replace(/[^a-z0-9]/g, '')}`}\n            >\n              {getDefaultDescription(category)}\n            </span>\n          </button>\n        ))}\n      </div>\n      {error && (\n        <div className=\"fallback-notice\" role=\"status\" aria-live=\"polite\">\n          <small>‚ö†Ô∏è Using fallback categories due to loading error</small>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TopicSelector;"],"names":["TopicSelector","onTopicSelect","selectedTopic","categories","setCategories","useState","loading","setLoading","error","setError","getDefaultIcon","category","getDefaultDescription","loadCategories","useMemo","cats","contentSearchService","err","useEffect","handleTopicClick","retryLoading","jsx","Spinner","ErrorState","jsxs","index"],"mappings":"mHAoBA,MAAMA,EAA8C,CAAC,CAAE,cAAAC,EAAe,cAAAC,KAAoB,CACxF,KAAM,CAACC,EAAYC,CAAa,EAAIC,EAAAA,SAAmB,CAAA,CAAE,EACnD,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAwB,IAAI,EAGhDK,EAAkBC,IACkB,CACtC,MAAS,KACT,cAAiB,KACjB,aAAc,KACd,QAAW,IAAA,GAEEA,CAAQ,GAAK,KAIxBC,EAAyBD,IACkB,CAC7C,MAAS,sDACT,cAAiB,0CACjB,aAAc,gDACd,QAAW,kDAAA,GAESA,CAAQ,GAAK,WAAWA,EAAS,aAAa,oBAGhEE,EAAiBC,EAAAA,QAAQ,IAAM,SAA2B,CAC9D,GAAI,CACFP,EAAW,EAAI,EACf,MAAMQ,EAAO,MAAMC,EAAqB,cAAA,EAExC,GAAID,EAAK,SAAW,EAClB,MAAM,IAAI,MAAM,qBAAqB,EAGvCX,EAAcW,CAAI,EAClBN,EAAS,IAAI,CACf,OAASQ,EAAK,CACZ,QAAQ,MAAM,4BAA6BA,CAAG,EAC9CR,EAASQ,aAAe,MAAQA,EAAI,QAAU,eAAe,EAE7Db,EAAc,CAAC,QAAS,gBAAiB,YAAY,CAAC,CACxD,QAAA,CACEG,EAAW,EAAK,CAClB,CACF,EAAG,CAAA,CAAE,EAELW,EAAAA,UAAU,IAAM,CACdL,EAAA,CACF,EAAG,CAACA,CAAc,CAAC,EAEnB,MAAMM,EAAoBR,GAA2B,CAC/CV,GACFA,EAAcU,CAAQ,CAE1B,EAEMS,EAAe,IAAY,CAC/BX,EAAS,IAAI,EACbF,EAAW,EAAI,EACfM,EAAA,CACF,EAEA,OAAIP,EAEAe,EAAAA,IAACC,EAAA,CACC,QAAQ,wBACR,aAAW,oCAAA,CAAA,EAKbd,GAASL,EAAW,SAAW,EAE/BkB,EAAAA,IAACE,EAAA,CACC,MAAM,4BACN,QAASf,EACT,QAASY,EACT,UAAU,WAAA,CAAA,EAMdI,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAH,EAAAA,IAAC,MAAA,CAAI,GAAG,gBAAgB,UAAU,gBAC/B,SAAAlB,EAAW,IAAI,CAACQ,EAAUc,IACzBD,EAAAA,KAAC,SAAA,CAEC,UAAW,kCAAkCb,EAAS,YAAA,EAAc,QAAQ,aAAc,EAAE,CAAC,IAC3FT,IAAkBS,EAAW,WAAa,EAC5C,GACA,QAAS,IAAMQ,EAAiBR,CAAQ,EACxC,MAAO,CAAE,eAAgB,GAAGc,EAAQ,EAAG,GAAA,EACvC,cAAa,gBAAgBd,EAAS,YAAA,EAAc,QAAQ,aAAc,EAAE,CAAC,GAC7E,eAAcT,IAAkBS,EAChC,mBAAkB,cAAcA,EAAS,YAAA,EAAc,QAAQ,aAAc,EAAE,CAAC,GAEhF,SAAA,CAAAU,EAAAA,IAAC,QAAK,UAAU,aAAa,cAAY,OAAQ,SAAAX,EAAeC,CAAQ,EAAE,EAC1EU,EAAAA,IAAC,OAAA,CAAK,UAAU,aAAc,SAAAV,EAAS,EACvCU,EAAAA,IAAC,OAAA,CACC,UAAU,oBACV,GAAI,cAAcV,EAAS,YAAA,EAAc,QAAQ,aAAc,EAAE,CAAC,GAEjE,WAAsBA,CAAQ,CAAA,CAAA,CACjC,CAAA,EAjBKA,CAAA,CAmBR,EACH,EACCH,GACCa,EAAAA,IAAC,MAAA,CAAI,UAAU,kBAAkB,KAAK,SAAS,YAAU,SACvD,SAAAA,MAAC,QAAA,CAAM,SAAA,mDAAA,CAAiD,CAAA,CAC1D,CAAA,EAEJ,CAEJ"}